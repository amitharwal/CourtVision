<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Court Vision üèÄ</title>
    <link rel="stylesheet" href="/static/css/home.css">
  </head>
<body>
  <div class="container">
    <header>
      <div class="logo">Court Vision üèÄ</div>
      <nav>
        <a href="/" class="active">Home</a>
        <a href="/players">Players</a>
        <a href="/team-trends">Teams</a>
        <a href="/shot-charts">Shot Charts</a>
        <a href="/compare">Compare</a>
        <a href="/advanced-metrics">Adv. Metrics</a>
      </nav>
    </header>

    <section class="hero">
      <h2>Court Vision üèÄ</h2>
      <p>Enjoy the game. Find players, teams, shot charts, and analytical tools‚Äîpowered by real-time data.</p>
      <button id="load-data">Today's Games List</button>
    </section>

    <section id="chart-container">
      <h3>Today's Games</h3>
      <table class="leaderboard-table">
        <thead>
          <tr>
            <th>Matchup</th>
            <th>Time</th>
            <th>Arena</th>
          </tr>
        </thead>
        <tbody>
          {% if games_today %}
            {% for game in games_today %}
              <tr>
                <td class="matchup">{{ game.matchup }}</td>
                <td>{{ game.game_time }}</td>
                <td>{{ game.arena }}</td>
              </tr>
            {% endfor %}
          {% else %}
            <tr>
              <td colspan="3">No games scheduled today.</td>
            </tr>
          {% endif %}
        </tbody>
      </table>
    </section>

    <section class="quick-stats">
      <h3>Quick Stats</h3>
      <div class="stats-grid">
        <div class="stat-card">
          <h4>Total Players</h4>
          <p class="stat-number" id="total-players">Loading...</p>
        </div>
        <div class="stat-card">
          <h4>Active Teams</h4>
          <p class="stat-number">30</p>
        </div>
        <div class="stat-card">
          <h4>Current Season</h4>
          <p class="stat-number">{{ seasons[0] }}</p>
        </div>
        <div class="stat-card">
          <h4>Games Today</h4>
          <div class="stat-number">{{ games_count }}</div>
        </div>
      </div>
    </section>

    <section class="features">
      <h3>Features</h3>
      <div class="feature-grid">
        <div class="feature-card">
          <div class="feature-icon">
            <svg viewBox="0 0 24 24" width="48" height="48" fill="none" stroke="currentColor" stroke-width="2">
              <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
              <line x1="3" y1="9" x2="21" y2="9"></line>
              <line x1="9" y1="21" x2="9" y2="9"></line>
            </svg>
          </div>
          <h4>Player Database</h4>
          <p>Browse and filter all NBA players with detailed statistics</p>
        </div>
        <div class="feature-card">
          <div class="feature-icon">
            <svg viewBox="0 0 24 24" width="48" height="48" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="12" cy="12" r="10"></circle>
              <circle cx="12" cy="12" r="3"></circle>
              <line x1="12" y1="1" x2="12" y2="3"></line>
              <line x1="12" y1="21" x2="12" y2="23"></line>
              <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
              <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
              <line x1="1" y1="12" x2="3" y2="12"></line>
              <line x1="21" y1="12" x2="23" y2="12"></line>
              <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
              <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
            </svg>
          </div>
          <h4>Shot Charts</h4>
          <p>Interactive visualizations of player shooting patterns</p>
        </div>
        <div class="feature-card">
          <div class="feature-icon">
            <svg viewBox="0 0 24 24" width="48" height="48" fill="none" stroke="currentColor" stroke-width="2">
              <polyline points="22 12 18 12 15 21 9 3 6 12 2 12"></polyline>
            </svg>
          </div>
          <h4>Team Analytics</h4>
          <p>Deep dive into team performance and efficiency metrics</p>
        </div>
        <div class="feature-card">
          <div class="feature-icon">
            <svg viewBox="0 0 24 24" width="48" height="48" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="18" cy="18" r="3"></circle>
              <circle cx="6" cy="6" r="3"></circle>
              <path d="M13 6h3a2 2 0 0 1 2 2v7"></path>
              <line x1="6" y1="9" x2="6" y2="21"></line>
            </svg>
          </div>
          <h4>Player Comparison</h4>
          <p>Compare up to 4 players side-by-side</p>
        </div>
        <div class="feature-card">
          <div class="feature-icon">
            <svg viewBox="0 0 24 24" width="48" height="48" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
              <polyline points="14 2 14 8 20 8"></polyline>
              <line x1="16" y1="13" x2="8" y2="13"></line>
              <line x1="16" y1="17" x2="8" y2="17"></line>
              <polyline points="10 9 9 9 8 9"></polyline>
            </svg>
          </div>
          <h4>Advanced Metrics</h4>
          <p>True Shooting %, Usage Rate, and more</p>
        </div>
        <div class="feature-card">
          <div class="feature-icon">
            <svg viewBox="0 0 24 24" width="48" height="48" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
              <polyline points="7 10 12 15 17 10"></polyline>
              <line x1="12" y1="15" x2="12" y2="3"></line>
            </svg>
          </div>
          <h4>Export Data</h4>
          <p>Download player and team data in CSV format</p>
        </div>
      </div>
    </section>

    <footer>
      <p>¬© 2025 Court Vision ‚Ä¢ Built with Flask & NBA API</p>
      <p class="footer-links">
        <a href="https://github.com/amitharwal/CourtVision">GitHub</a> ‚Ä¢
        <a href="https://github.com/swar/nba_api">API Docs</a> ‚Ä¢
        <a href="/about">About</a>
      </p>
    </footer>
  </div>

  <script>
    const currentSeason = "{{ seasons[0] }}";

  document.addEventListener('DOMContentLoaded', function() {
    loadQuickStats();
    document.getElementById('load-data').addEventListener('click', () => location.reload());
  });

  async function loadQuickStats() {
    try {
      const r = await fetch('/test-api');
      const j = await r.json();
      if (j.success) {
        document.getElementById('total-players').textContent = j.players_count;
      } else {
        document.getElementById('total-players').textContent = '‚Äî';
      }
    } catch {
      document.getElementById('total-players').textContent = '‚Äî';
    }
  }
  </script>
</body>
</html>